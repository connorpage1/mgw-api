{% extends "admin/base.html" %}

{% block page_title %}Bulk Upload{% endblock %}
{% block header_title %}Bulk Upload Terms & Categories{% endblock %}

{% block content %}
<div class="max-w-xl mx-auto bg-white rounded-lg shadow-md p-8">
    <h2 class="text-2xl font-bold mb-6">Bulk Upload from JSON</h2>
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <div class="mb-4">
          {% for category, message in messages %}
            <div class="p-3 rounded mb-2 {{ 'bg-green-100 text-green-800' if category == 'success' else 'bg-red-100 text-red-800' }}">
              {{ message }}
            </div>
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}
    <form method="post" enctype="multipart/form-data">
        <div class="mb-4">
            <label class="block text-gray-700 font-medium mb-2">JSON File</label>
            <input type="file" name="json_file" accept="application/json" class="form-input w-full" required>
            <p class="text-xs text-gray-500 mt-1">File must be a JSON file with 'categories' and/or 'terms' arrays.</p>
        </div>
        <button type="submit" class="bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded">Upload</button>
    </form>
    <div class="mt-6 text-xs text-gray-500">
        <b>Example JSON format:</b>
        <pre>{
  "categories": [
    {"name": "Food & Drink", "icon": "üçî", "description": "Yum!"}
  ],
  "terms": [
    {"term": "King Cake", "pronunciation": "king-kayk", "definition": "A sweet cake...", "difficulty": "tourist", "category": "Food & Drink"}
  ]
}</pre>
    </div>
</div>
{% endblock %}
