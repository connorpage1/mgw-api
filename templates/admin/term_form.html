{% extends "admin/base.html" %}

{% block page_title %}{% if term %}Edit Term{% else %}New Term{% endif %}{% endblock %}

{% block header_title %}{% if term %}Edit Term{% else %}Create New Term{% endif %}{% endblock %}

{% block content %}
<div class="max-w-4xl">
    <div class="bg-white rounded-lg shadow-md p-6">
        <div class="flex items-center justify-between mb-6">
            <h2 class="text-xl font-semibold">{% if term %}Edit: {{ term.term }}{% else %}Create New Term{% endif %}</h2>
            <a href="{{ url_for('admin_glossary_terms_list') }}" class="text-gray-500 hover:text-gray-700">
                <i class="fas fa-times text-xl"></i>
            </a>
        </div>
        
        <form method="POST" class="space-y-6">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <label for="term" class="block text-sm font-medium text-gray-700 mb-2">Term *</label>
                    <input type="text" id="term" name="term" required
                           value="{% if term %}{{ term.term }}{% elif form_data %}{{ form_data.term }}{% endif %}"
                           class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500">
                </div>
                
                <div>
                    <label for="pronunciation" class="block text-sm font-medium text-gray-700 mb-2">Pronunciation *</label>
                    <input type="text" id="pronunciation" name="pronunciation" required
                           value="{% if term %}{{ term.pronunciation }}{% elif form_data %}{{ form_data.pronunciation }}{% endif %}"
                           class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500"
                           placeholder="/pronunciation/">
                </div>
            </div>
            
            <div>
                <label for="definition" class="block text-sm font-medium text-gray-700 mb-2">Definition *</label>
                <textarea id="definition" name="definition" required rows="3"
                          class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500">{% if term %}{{ term.definition }}{% elif form_data %}{{ form_data.definition }}{% endif %}</textarea>
            </div>
            
            <div>
                <label for="etymology" class="block text-sm font-medium text-gray-700 mb-2">Etymology</label>
                <textarea id="etymology" name="etymology" rows="2"
                          class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500">{% if term %}{{ term.etymology or '' }}{% elif form_data %}{{ form_data.etymology or '' }}{% endif %}</textarea>
            </div>
            
            <div>
                <label for="example" class="block text-sm font-medium text-gray-700 mb-2">Example</label>
                <textarea id="example" name="example" rows="2"
                          class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500">{% if term %}{{ term.example or '' }}{% elif form_data %}{{ form_data.example or '' }}{% endif %}</textarea>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <label for="category_id" class="block text-sm font-medium text-gray-700 mb-2">Category *</label>
                    <select id="category_id" name="category_id" required
                            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500">
                        <option value="">Select Category</option>
                        {% for category in categories %}
                            <option value="{{ category.id }}" 
                                {% if (term and term.category_id == category.id) or (form_data and form_data.category_id|int == category.id) %}selected{% endif %}>
                                {{ category.icon }} {{ category.name }}
                            </option>
                        {% endfor %}
                    </select>
                </div>
                
                <div>
                    <label for="difficulty" class="block text-sm font-medium text-gray-700 mb-2">Difficulty *</label>
                    <select id="difficulty" name="difficulty" required
                            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500">
                        <option value="">Select Difficulty</option>
                        <option value="tourist" {% if (term and term.difficulty == 'tourist') or (form_data and form_data.difficulty == 'tourist') %}selected{% endif %}>Tourist</option>
                        <option value="local" {% if (term and term.difficulty == 'local') or (form_data and form_data.difficulty == 'local') %}selected{% endif %}>Local</option>
                        <option value="expert" {% if (term and term.difficulty == 'expert') or (form_data and form_data.difficulty == 'expert') %}selected{% endif %}>Expert</option>
                    </select>
                </div>
            </div>
            
            <div class="flex items-center space-x-6">
                <label class="flex items-center">
                    <input type="checkbox" name="is_featured"
                           {% if (term and term.is_featured) or (form_data and form_data.is_featured) %}checked{% endif %}
                           class="mr-2 rounded border-gray-300 focus:ring-2 focus:ring-purple-500">
                    <span class="text-sm text-gray-700">Featured Term</span>
                </label>
                
                {% if term %}
                <label class="flex items-center">
                    <input type="checkbox" name="is_active"
                           {% if term.is_active %}checked{% endif %}
                           class="mr-2 rounded border-gray-300 focus:ring-2 focus:ring-purple-500">
                    <span class="text-sm text-gray-700">Active</span>
                </label>
                {% endif %}
            </div>
            
            <div class="flex justify-end space-x-4">
                <a href="{{ url_for('admin_glossary_terms_list') }}" 
                   class="px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50">
                    Cancel
                </a>
                <button type="submit" class="bg-gradient-to-r from-purple-600 to-blue-600 text-white px-6 py-2 rounded-lg hover:from-purple-700 hover:to-blue-700">
                    {% if term %}Update Term{% else %}Create Term{% endif %}
                </button>
            </div>
        </form>
    </div>
</div>
{% endblock %}
